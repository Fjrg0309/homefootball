@charset "utf-8";
@use 'sass:map';

// =============================================
// MIXINS PARA HOMEFOOTBALL
// Estrategia: MOBILE-FIRST
// =============================================
// Justificación Mobile-First:
// 1. Rendimiento: Los dispositivos móviles tienen menos potencia, cargamos primero los estilos básicos
// 2. Progresividad: Añadimos complejidad solo cuando hay espacio/capacidad para ello
// 3. SEO: Google prioriza mobile-first indexing
// 4. Estadísticas: La mayoría de usuarios acceden desde móvil
// =============================================

// =============================================
// BREAKPOINTS (MOBILE-FIRST)
// =============================================
// Definición de breakpoints basados en dispositivos reales
$breakpoints: (
  'xs': 20rem,      // 320px - Mobile pequeño (iPhone SE)
  'sm': 23.4375rem, // 375px - Mobile estándar (iPhone X/12)
  'md': 48rem,      // 768px - Tablet
  'lg': 64rem,      // 1024px - Desktop pequeño / Tablet landscape
  'xl': 80rem,      // 1280px - Desktop estándar
  'xxl': 90rem      // 1440px - Desktop grande
);

// =============================================
// RESPONSIVE MIXINS (MOBILE-FIRST - min-width)
// =============================================
// Uso: @include respond-to('md') { ... }
// Genera: @media (min-width: 768px) { ... }
@mixin respond-to($breakpoint) {
  @if map.has-key($breakpoints, $breakpoint) {
    @media (min-width: map.get($breakpoints, $breakpoint)) {
      @content;
    }
  } @else {
    @warn "Breakpoint '#{$breakpoint}' no encontrado en $breakpoints.";
  }
}

// Alias semánticos para mayor claridad
@mixin mobile-small { @include respond-to('xs') { @content; } }
@mixin mobile { @include respond-to('sm') { @content; } }
@mixin tablet { @include respond-to('md') { @content; } }
@mixin desktop-small { @include respond-to('lg') { @content; } }
@mixin desktop { @include respond-to('xl') { @content; } }
@mixin desktop-large { @include respond-to('xxl') { @content; } }

// =============================================
// RESPONSIVE UTILITIES (max-width para casos específicos)
// =============================================
// Uso cuando necesitamos aplicar estilos SOLO en móvil
@mixin below($breakpoint) {
  @if map.has-key($breakpoints, $breakpoint) {
    @media (max-width: calc(map.get($breakpoints, $breakpoint) - 0.0625rem)) {
      @content;
    }
  }
}

// Rango específico de breakpoints
@mixin between($min, $max) {
  @if map.has-key($breakpoints, $min) and map.has-key($breakpoints, $max) {
    @media (min-width: map.get($breakpoints, $min)) and (max-width: calc(map.get($breakpoints, $max) - 0.0625rem)) {
      @content;
    }
  }
}

// =============================================
// CONTAINER QUERIES
// =============================================
// Mixin para crear container query contexts
// Uso: @include container-context('card');
@mixin container-context($name: null) {
  container-type: inline-size;
  @if $name {
    container-name: #{$name};
  }
}

// Mixin para aplicar estilos basados en el contenedor
// Uso: @include container-query(400px) { ... }
@mixin container-query($min-width, $name: null) {
  @if $name {
    @container #{$name} (min-width: #{$min-width}) {
      @content;
    }
  } @else {
    @container (min-width: #{$min-width}) {
      @content;
    }
  }
}

// Container query con nombre específico
@mixin cq($name, $min-width) {
  @container #{$name} (min-width: #{$min-width}) {
    @content;
  }
}

// =============================================
// LAYOUT MIXINS
// =============================================

// MIXIN: FLEX-CENTER
// Centrado flexible reutilizable en toda la app
// Uso: @include flex-center(column, var(--spacing-4));
@mixin flex-center($direction: row, $gap: var(--spacing-2)) {
  display: flex;
  flex-direction: $direction;
  align-items: center;
  justify-content: center;
  gap: $gap;
}

// MIXIN: RESPONSIVE GRID
// Grid responsive con auto-fit/auto-fill
// Uso: @include responsive-grid(280px, 1.5rem);
@mixin responsive-grid($min-width: 280px, $gap: var(--spacing-4), $fill: false) {
  display: grid;
  gap: $gap;
  @if $fill {
    grid-template-columns: repeat(auto-fill, minmax(#{$min-width}, 1fr));
  } @else {
    grid-template-columns: repeat(auto-fit, minmax(#{$min-width}, 1fr));
  }
}

// MIXIN: CONTAINER
// Contenedor con ancho máximo y padding responsive
// Uso: @include container(1280px);
@mixin container($max-width: 80rem) {
  width: 100%;
  max-width: $max-width;
  margin-inline: auto;
  padding-inline: var(--spacing-2);
  
  @include tablet {
    padding-inline: var(--spacing-3);
  }
  
  @include desktop {
    padding-inline: var(--spacing-4);
  }
}

// =============================================
// COMPONENT MIXINS
// =============================================

// MIXIN: CARD
// Contenedores con bordes redondeados y sombra opcional
// Uso: @include card(var(--spacing-4), var(--color-primary), false);
@mixin card($padding: var(--spacing-6), $bg: white, $shadow: true) {
  background: $bg;
  border-radius: var(--radius-lg);
  padding: $padding;
  
  // Padding responsive
  @include below('md') {
    padding: calc(#{$padding} * 0.75);
  }
  
  @if $shadow {
    box-shadow: var(--shadow-sm);
  }
}

// MIXIN: PILL-BUTTON
// Botones con forma pill (muy redondeados) usados en competiciones, acciones, etc.
// Uso: @include pill-button(var(--color-sendcomment), var(--color-text));
@mixin pill-button($bg: var(--color-secundary), $color: var(--color-text)) {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);
  background: $bg;
  color: $color;
  border: var(--border-thin) solid var(--color-neutral-300);
  border-radius: var(--radius-full);
  padding: var(--spacing-2) var(--spacing-5);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast) var(--transition-ease);

  &:hover {
    background: var(--color-accent);
    border-color: var(--color-accent);
    transform: translateY(-0.0625rem);
    box-shadow: var(--shadow-sm);
  }
  
  // Responsive touch targets (mínimo 44px en móvil)
  @include below('md') {
    min-height: 2.75rem;
    padding: var(--spacing-2) var(--spacing-4);
  }
}

// =============================================
// TYPOGRAPHY MIXINS
// =============================================

// MIXIN: RESPONSIVE-TEXT
// Texto que escala según viewport
// Uso: @include responsive-text(1rem, 1.5rem, 2rem);
@mixin responsive-text($mobile, $tablet, $desktop) {
  font-size: $mobile;
  
  @include tablet {
    font-size: $tablet;
  }
  
  @include desktop {
    font-size: $desktop;
  }
}

// MIXIN: FLUID-TYPE
// Tipografía fluida con clamp()
// Uso: @include fluid-type(1rem, 2rem, 320px, 1280px);
@mixin fluid-type($min-size, $max-size, $min-vw: 20rem, $max-vw: 80rem) {
  font-size: clamp(
    #{$min-size},
    calc(#{$min-size} + (#{strip-unit($max-size)} - #{strip-unit($min-size)}) * ((100vw - #{$min-vw}) / (#{strip-unit($max-vw)} - #{strip-unit($min-vw)}))),
    #{$max-size}
  );
}

// Helper function para strip unit
@function strip-unit($value) {
  @return $value / ($value * 0 + 1);
}

// MIXIN: TRUNCATE
// Texto truncado con ellipsis
@mixin truncate($lines: 1) {
  @if $lines == 1 {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

// =============================================
// UTILITY MIXINS
// =============================================

// MIXIN: VISUALLY-HIDDEN
// Ocultar visualmente pero mantener accesible
@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// MIXIN: FOCUS-RING
// Estilos de focus accesibles y consistentes
@mixin focus-ring($color: var(--color-accent), $offset: 2px) {
  &:focus {
    outline: none;
  }
  
  &:focus-visible {
    outline: 2px solid $color;
    outline-offset: $offset;
  }
}

// MIXIN: TOUCH-TARGET
// Asegurar áreas táctiles mínimas de 44x44px
@mixin touch-target($size: 2.75rem) {
  position: relative;
  min-width: $size;
  min-height: $size;
  
  // Expandir área táctil si el elemento es más pequeño
  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    min-width: $size;
    min-height: $size;
  }
}

// MIXIN: ASPECT-RATIO
// Mantener aspect ratio en elementos
@mixin aspect-ratio($ratio: 16/9) {
  aspect-ratio: $ratio;
  
  // Fallback para navegadores antiguos
  @supports not (aspect-ratio: #{$ratio}) {
    &::before {
      content: '';
      display: block;
      padding-top: calc(100% / #{$ratio});
    }
  }
}

// MIXIN: HIDE-ON
// Ocultar en breakpoints específicos
@mixin hide-on($breakpoint) {
  @include respond-to($breakpoint) {
    display: none !important;
  }
}

// MIXIN: SHOW-ON
// Mostrar solo en breakpoints específicos
@mixin show-on($breakpoint) {
  display: none !important;
  
  @include respond-to($breakpoint) {
    display: block !important;
  }
}
