<form class="login-form" (ngSubmit)="onSubmit()" #loginFormElement="ngForm">
  <fieldset class="login-form__fieldset" [disabled]="isLoading()">
    <legend class="login-form__legend" id="modal-title">Iniciar sesión</legend>
    
    @if (errorMessage()) {
      <div class="login-form__error-banner" role="alert" aria-live="polite">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        {{ errorMessage() }}
      </div>
    }
    
    <section class="login-form__field-group">
      <app-form-input
        label="Usuario"
        type="text"
        name="username"
        placeholder="Introduce tu usuario"
        [required]="true"
        [(ngModel)]="formData.username"
        [errorMessage]="submitted && !formData.username ? 'El usuario es obligatorio' : ''"
      ></app-form-input>
    </section>

    <section class="login-form__field-group">
      <app-form-input
        label="Contraseña"
        type="password"
        name="password"
        placeholder="Introduce tu contraseña"
        [required]="true"
        [(ngModel)]="formData.password"
        [errorMessage]="submitted && !formData.password ? 'La contraseña es obligatoria' : ''"
      ></app-form-input>
    </section>

    <section class="login-form__actions">
      <button 
        type="submit" 
        class="login-form__btn"
        [class.login-form__btn--loading]="isLoading()"
        title="Acceder a tu cuenta"
        aria-label="Iniciar sesión en tu cuenta"
      >
        @if (isLoading()) {
          <span class="login-form__spinner" aria-hidden="true"></span>
          Iniciando sesión...
        } @else {
          Iniciar sesión
        }
      </button>
    </section>

    <footer class="login-form__footer">
      <p class="login-form__register-text">
        ¿No tienes una cuenta? 
        <button 
          type="button" 
          class="login-form__register-link"
          (click)="onGoToRegister()"
          title="Ir al formulario de registro"
          aria-label="Crear una cuenta nueva"
        >
          Regístrate
        </button>
      </p>
    </footer>
  </fieldset>
</form>
