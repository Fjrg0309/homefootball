<div class="interactive-components-container">
  <h1>Tarea 3: Componentes Interactivos Funcionales</h1>

  <!-- Secci√≥n 1: Men√∫ Hamburguesa -->
  <section class="seccion">
    <h2>1. Men√∫ Hamburguesa</h2>
    <p class="descripcion">
      Men√∫ lateral que se abre/cierra con un bot√≥n. Se cierra autom√°ticamente al hacer click fuera del men√∫ usando <code>@HostListener</code>.
    </p>

    <div class="ejemplo-box">
      <div class="hamburger-demo">
        <!-- Bot√≥n hamburguesa -->
        <button class="hamburger-button" (click)="toggleMenu()" [class.active]="isMenuOpen">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <div class="demo-info">
          <p><strong>Estado:</strong> {{ isMenuOpen ? 'üü¢ Abierto' : 'üî¥ Cerrado' }}</p>
          <p class="hint">üí° Click en el bot√≥n para abrir/cerrar. El men√∫ se cerrar√° autom√°ticamente si haces click fuera.</p>
        </div>

        <!-- Men√∫ lateral -->
        <nav class="hamburger-menu" [class.open]="isMenuOpen">
          <div class="menu-header">
            <h3>üì± Men√∫ de Navegaci√≥n</h3>
            <button class="close-button" (click)="closeMenu()">‚úï</button>
          </div>
          <ul class="menu-list">
            @for (item of menuItems; track item.label) {
              <li>
                <a [href]="item.link" (click)="closeMenu()">
                  <span class="menu-icon">{{ item.icon }}</span>
                  <span>{{ item.label }}</span>
                </a>
              </li>
            }
          </ul>
        </nav>

        <!-- Overlay (fondo oscuro) -->
        <div class="menu-overlay" [class.visible]="isMenuOpen" (click)="closeMenu()"></div>
      </div>
    </div>

    <div class="code-info">
      <h4>C√≥digo TypeScript:</h4>
      <pre><code>isMenuOpen = false;

toggleMenu() &#123;
  this.isMenuOpen = !this.isMenuOpen;
&#125;

// Cerrar al hacer click fuera
@HostListener('document:click', ['$event'])
onDocumentClick(event: MouseEvent) &#123;
  if (this.isMenuOpen && !menuContiene(event.target)) &#123;
    this.isMenuOpen = false;
  &#125;
&#125;</code></pre>
      <h4>Template HTML:</h4>
      <pre><code>&lt;nav [class.open]="isMenuOpen"&gt;
  &lt;!-- Contenido del men√∫ --&gt;
&lt;/nav&gt;</code></pre>
    </div>
  </section>

  <!-- Secci√≥n 2: Modales -->
  <section class="seccion">
    <h2>2. Modal (con cierre ESC)</h2>
    <p class="descripcion">
      Modal que se puede cerrar haciendo click fuera, en el bot√≥n de cerrar, o presionando la tecla <code>ESC</code> usando <code>@HostListener</code>.
    </p>

    <div class="ejemplo-box">
      <button class="btn btn-primary" (click)="openModal()">
        ü™ü Abrir Modal
      </button>

      <div class="demo-info" style="margin-top: 1rem;">
        <p><strong>Estado del Modal:</strong> {{ isModalOpen ? 'üü¢ Abierto' : 'üî¥ Cerrado' }}</p>
        <p class="hint">üí° Formas de cerrar: Click en ‚úï, Click fuera del modal, o presionar ESC</p>
      </div>
    </div>

    <!-- Modal -->
    @if (isModalOpen) {
      <div class="modal-backdrop" (click)="onModalBackdropClick($event)" @fadeIn>
        <div class="modal-content" (click)="onModalContentClick($event)">
          <div class="modal-header">
            <h3>{{ modalTitle }}</h3>
            <button class="modal-close" (click)="closeModal()">‚úï</button>
          </div>
          <div class="modal-body">
            <p>{{ modalContent }}</p>
            <div class="modal-features">
              <div class="feature">‚úÖ Click en el fondo oscuro para cerrar</div>
              <div class="feature">‚úÖ Click en el bot√≥n ‚úï para cerrar</div>
              <div class="feature">‚úÖ Presiona ESC para cerrar</div>
              <div class="feature">‚úÖ Click dentro del modal NO lo cierra (stopPropagation)</div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" (click)="closeModal()">Cancelar</button>
            <button class="btn btn-primary" (click)="closeModal()">Aceptar</button>
          </div>
        </div>
      </div>
    }

    <div class="code-info">
      <h4>C√≥digo TypeScript:</h4>
      <pre><code>isModalOpen = false;

openModal() &#123;
  this.isModalOpen = true;
&#125;

closeModal() &#123;
  this.isModalOpen = false;
&#125;

// Cerrar con ESC
@HostListener('document:keydown.escape')
onEscapeKey() &#123;
  if (this.isModalOpen) &#123;
    this.closeModal();
  &#125;
&#125;</code></pre>
      <h4>Template HTML:</h4>
      <pre><code>&#64;if (isModalOpen) &#123;
  &lt;div class="modal-backdrop" (click)="onBackdropClick($event)"&gt;
    &lt;div class="modal-content"&gt;
      &lt;!-- Contenido --&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&#125;</code></pre>
    </div>
  </section>

  <!-- Secci√≥n 3: Tabs -->
  <section class="seccion">
    <h2>3. Tabs (Pesta√±as)</h2>
    <p class="descripcion">
      Sistema de pesta√±as con navegaci√≥n por teclado completa. Usa <strong>Arrow Left/Right</strong>, <strong>Home</strong>, y <strong>End</strong> para navegar.
    </p>

    <div class="ejemplo-box">
      <div class="tabs-container" #tabsContainer>
        <!-- Botones de pesta√±as -->
        <div class="tabs-header" role="tablist" aria-label="Secciones de informaci√≥n">
          @for (tab of tabs; track tab.id; let i = $index) {
            <button 
              role="tab"
              class="tab-button"
              [class.active]="activeTab === tab.id"
              [attr.aria-selected]="activeTab === tab.id"
              [attr.aria-controls]="'panel-' + tab.id"
              [attr.tabindex]="activeTab === tab.id ? 0 : -1"
              [id]="'tab-' + tab.id"
              (click)="selectTab(tab.id)"
              (keydown)="onTabKeydown($event, i)">
              <span class="tab-icon">{{ tab.icon }}</span>
              <span class="tab-label">{{ tab.label }}</span>
            </button>
          }
        </div>

        <!-- Contenido de las pesta√±as -->
        <div class="tabs-content">
          @for (tab of tabs; track tab.id) {
            @if (activeTab === tab.id) {
              <div 
                role="tabpanel"
                class="tab-panel" 
                [@fadeIn]
                [id]="'panel-' + tab.id"
                [attr.aria-labelledby]="'tab-' + tab.id"
                tabindex="0">
                <h3>{{ tab.icon }} {{ tab.label }}</h3>
                <p>{{ tab.content }}</p>
                <div class="tab-meta">
                  <small>Pesta√±a activa: <strong>{{ tab.id }}</strong></small>
                </div>
              </div>
            }
          }
        </div>

        <div class="tabs-info">
          <strong>Pesta√±a actual:</strong> {{ activeTab }}<br>
          <small>üí° Usa <kbd>‚Üê</kbd> <kbd>‚Üí</kbd> para navegar | <kbd>Home</kbd> <kbd>End</kbd> para ir al inicio/fin</small>
        </div>
      </div>
    </div>

    <div class="code-info">
      <h4>C√≥digo TypeScript:</h4>
      <pre><code>activeTab = 'detalles';

selectTab(tabId: string) &#123;
  this.activeTab = tabId;
&#125;

// Navegaci√≥n por teclado
onTabKeydown(event: KeyboardEvent, index: number) &#123;
  let newIndex = index;
  switch(event.key) &#123;
    case 'ArrowLeft': newIndex = index - 1; break;
    case 'ArrowRight': newIndex = index + 1; break;
    case 'Home': newIndex = 0; break;
    case 'End': newIndex = tabs.length - 1; break;
  &#125;
&#125;</code></pre>
      <h4>Template HTML (con accesibilidad):</h4>
      <pre><code>&lt;div role="tablist"&gt;
  &lt;button 
    role="tab"
    [attr.aria-selected]="activeTab === 'detalles'"
    [attr.aria-controls]="'panel-detalles'"
    (click)="selectTab('detalles')"
    (keydown)="onTabKeydown($event, 0)"&gt;
    Detalles
  &lt;/button&gt;
&lt;/div&gt;

&lt;div 
  role="tabpanel"
  id="panel-detalles"
  aria-labelledby="tab-detalles"&gt;
  Contenido de Detalles
&lt;/div&gt;
&#125;</code></pre>
    </div>
  </section>

  <!-- Secci√≥n 4: Tooltips -->
  <section class="seccion">
    <h2>4. Tooltips</h2>
    <p class="descripcion">
      Tooltips que aparecen con <strong>hover</strong> y <strong>focus</strong>. Incluyen delay configurable ({{ tooltipDelay }}ms), posicionamiento y accesibilidad completa con <code>aria-describedby</code>.
    </p>

    <div class="ejemplo-box">
      <div class="tooltips-demo">
        <h4>Tooltips con eventos de Angular:</h4>
        <div class="tooltip-row">
          <!-- Tooltip Arriba -->
          <div class="tooltip-wrapper">
            <button 
              class="btn btn-info"
              aria-describedby="tooltip-1"
              (mouseenter)="showTooltip(1)"
              (mouseleave)="hideTooltip(1)"
              (focusin)="showTooltip(1)"
              (focusout)="hideTooltip(1)">
              üîù Tooltip Arriba
            </button>
            @if (showTooltip1) {
              <div id="tooltip-1" class="tooltip tooltip-top" role="tooltip" [@fadeIn]>
                Este es un tooltip que aparece arriba del elemento
              </div>
            }
          </div>

          <!-- Tooltip Derecha -->
          <div class="tooltip-wrapper">
            <button 
              class="btn btn-success"
              aria-describedby="tooltip-2"
              (mouseenter)="showTooltip(2)"
              (mouseleave)="hideTooltip(2)"
              (focusin)="showTooltip(2)"
              (focusout)="hideTooltip(2)">
              ‚û°Ô∏è Tooltip Derecha
            </button>
            @if (showTooltip2) {
              <div id="tooltip-2" class="tooltip tooltip-right" role="tooltip" [@fadeIn]>
                Tooltip a la derecha
              </div>
            }
          </div>

          <!-- Tooltip Abajo -->
          <div class="tooltip-wrapper">
            <button 
              class="btn btn-warning"
              aria-describedby="tooltip-3"
              (mouseenter)="showTooltip(3)"
              (mouseleave)="hideTooltip(3)"
              (focusin)="showTooltip(3)"
              (focusout)="hideTooltip(3)">
              üîΩ Tooltip Abajo
            </button>
            @if (showTooltip3) {
              <div id="tooltip-3" class="tooltip tooltip-bottom" role="tooltip" [@fadeIn]>
                Tooltip que aparece debajo
              </div>
            }
          </div>

          <!-- Tooltip Izquierda -->
          <div class="tooltip-wrapper">
            <button 
              class="btn btn-danger"
              aria-describedby="tooltip-4"
              (mouseenter)="showTooltip(4)"
              (mouseleave)="hideTooltip(4)"
              (focusin)="showTooltip(4)"
              (focusout)="hideTooltip(4)">
              ‚¨ÖÔ∏è Tooltip Izquierda
            </button>
            @if (showTooltip4) {
              <div id="tooltip-4" class="tooltip tooltip-left" role="tooltip" [@fadeIn]>
                Tooltip a la izquierda
              </div>
            }
          </div>
        </div>

        <h4 style="margin-top: 2rem;">Tooltips con CSS puro (hover):</h4>
        <div class="tooltip-row">
          <div class="tooltip-css" data-tooltip="Tooltip solo con CSS - Arriba">
            <button class="btn btn-primary">üé® CSS Arriba</button>
          </div>
          <div class="tooltip-css" data-tooltip="Tooltip CSS - Derecha" data-position="right">
            <button class="btn btn-primary">üé® CSS Derecha</button>
          </div>
          <div class="tooltip-css" data-tooltip="Tooltip CSS - Abajo" data-position="bottom">
            <button class="btn btn-primary">üé® CSS Abajo</button>
          </div>
          <div class="tooltip-css" data-tooltip="Tooltip CSS - Izquierda" data-position="left">
            <button class="btn btn-primary">üé® CSS Izquierda</button>
          </div>
        </div>
      </div>
    </div>

    <div class="code-info">
      <h4>C√≥digo TypeScript (Tooltips con Angular):</h4>
      <pre><code>showTooltip = false;
tooltipDelay = 300; // ms

showTooltip(num: number) &#123;
  const delayId = setTimeout(() =&gt; &#123;
    this.showTooltip = true;
  &#125;, this.tooltipDelay);
&#125;

hideTooltip(num: number) &#123;
  clearTimeout(delayId);
  this.showTooltip = false;
&#125;</code></pre>
      <h4>Template HTML (con accesibilidad):</h4>
      <pre><code>&lt;div class="tooltip-wrapper"&gt;
  &lt;button 
    aria-describedby="tooltip-1"
    (mouseenter)="showTooltip(1)"
    (mouseleave)="hideTooltip(1)"
    (focusin)="showTooltip(1)"
    (focusout)="hideTooltip(1)"&gt;
    Hover aqu√≠
  &lt;/button&gt;
  &#64;if (showTooltip) &#123;
    &lt;div id="tooltip-1" class="tooltip" role="tooltip"&gt;
      Texto del tooltip
    &lt;/div&gt;
  &#125;
&lt;/div&gt;</code></pre>
      <h4>CSS para tooltips puros:</h4>
      <pre><code>.tooltip-css:hover::after &#123;
  content: attr(data-tooltip);
  position: absolute;
  /* Estilos... */
&#125;</code></pre>
    </div>
  </section>

  <!-- Secci√≥n 5: Accordion -->
  <section class="seccion">
    <h2>5. Accordion (Acorde√≥n)</h2>
    <p class="descripcion">
      Componente accordion completamente accesible con navegaci√≥n por teclado. Usa <strong>Arrow Up/Down</strong>, <strong>Home</strong>, <strong>End</strong>, <strong>Enter</strong> y <strong>Espacio</strong> para navegar y expandir/colapsar.
    </p>

    <div class="ejemplo-box">
      <div class="accordion-demo">
        <div class="accordion-controls">
          <button class="btn btn-sm btn-secondary" (click)="expandAll()">Expandir Todos</button>
          <button class="btn btn-sm btn-secondary" (click)="collapseAll()">Colapsar Todos</button>
        </div>

        <div class="accordion-container" #accordionContainer>
          @for (item of accordionItems; track item.id; let i = $index) {
            <div class="accordion-item" [class.expanded]="item.expanded">
              <button 
                class="accordion-header"
                [attr.aria-expanded]="item.expanded"
                [attr.aria-controls]="'accordion-panel-' + item.id"
                [id]="'accordion-button-' + item.id"
                (click)="toggleAccordion(i)"
                (keydown)="onAccordionKeydown($event, i)">
                <span class="accordion-icon">
                  <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="16" 
                    height="16" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2"
                    [style.transform]="item.expanded ? 'rotate(180deg)' : 'rotate(0deg)'">
                    <polyline points="6 9 12 15 18 9"></polyline>
                  </svg>
                </span>
                <span class="accordion-title">{{ item.title }}</span>
              </button>
              
              <div 
                class="accordion-panel"
                [@expandCollapse]="item.expanded ? 'expanded' : 'collapsed'"
                [id]="'accordion-panel-' + item.id"
                [attr.aria-labelledby]="'accordion-button-' + item.id"
                role="region">
                <div class="accordion-content">
                  {{ item.content }}
                </div>
              </div>
            </div>
          }
        </div>

        <div class="accordion-info">
          <small>üí° Usa <kbd>‚Üë</kbd> <kbd>‚Üì</kbd> para navegar | <kbd>Enter</kbd> o <kbd>Espacio</kbd> para expandir/colapsar | <kbd>Home</kbd> <kbd>End</kbd> para ir al inicio/fin</small>
        </div>
      </div>
    </div>

    <div class="code-info">
      <h4>C√≥digo TypeScript:</h4>
      <pre><code>accordionItems = [
  &#123; id: 'item1', title: 'T√≠tulo 1', content: 'Contenido...', expanded: false &#125;,
  &#123; id: 'item2', title: 'T√≠tulo 2', content: 'Contenido...', expanded: false &#125;
];

toggleAccordion(index: number) &#123;
  this.accordionItems[index].expanded = !this.accordionItems[index].expanded;
&#125;

// Navegaci√≥n por teclado
onAccordionKeydown(event: KeyboardEvent, index: number) &#123;
  switch(event.key) &#123;
    case 'ArrowUp': /* navegar arriba */ break;
    case 'ArrowDown': /* navegar abajo */ break;
    case 'Home': /* ir al inicio */ break;
    case 'End': /* ir al final */ break;
    case 'Enter':
    case ' ': 
      this.toggleAccordion(index); 
      break;
  &#125;
&#125;</code></pre>
      <h4>Template HTML (con accesibilidad):</h4>
      <pre><code>&lt;div class="accordion-item"&gt;
  &lt;button 
    class="accordion-header"
    [attr.aria-expanded]="accordionItems[0].expanded"
    [attr.aria-controls]="'panel-' + accordionItems[0].id"
    (click)="toggleAccordion(0)"
    (keydown)="onAccordionKeydown($event, 0)"&gt;
    &#123;&#123; accordionItems[0].title &#125;&#125;
  &lt;/button&gt;
  
  &lt;div 
    class="accordion-panel"
    [@expandCollapse]="accordionItems[0].expanded ? 'expanded' : 'collapsed'"
    [id]="'panel-' + accordionItems[0].id"
    role="region"&gt;
    &#123;&#123; accordionItems[0].content &#125;&#125;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
      <h4>Animaci√≥n CSS:</h4>
      <pre><code>trigger('expandCollapse', [
  state('collapsed', style(&#123; height: '0', opacity: '0' &#125;)),
  state('expanded', style(&#123; height: '*', opacity: '1' &#125;)),
  transition('collapsed &lt;=&gt; expanded', animate('300ms ease-in-out'))
])</code></pre>
    </div>
  </section>

  <!-- Resumen -->
  <section class="seccion resumen">
    <h2>üìö Resumen de Componentes Interactivos</h2>
    <div class="resumen-grid">
      <div class="resumen-card">
        <h4>üçî Men√∫ Hamburguesa</h4>
        <ul>
          <li>Variable booleana <code>isOpen</code></li>
          <li>Toggle con <code>(click)</code></li>
          <li>Cierre con <code>@HostListener('document:click')</code></li>
          <li>Animaciones CSS para apertura</li>
          <li>Overlay para oscurecer fondo</li>
        </ul>
      </div>

      <div class="resumen-card">
        <h4>ü™ü Modales</h4>
        <ul>
          <li>Control con <code>isModalOpen</code></li>
          <li>Backdrop clickeable</li>
          <li>Cierre con ESC: <code>@HostListener('keydown.escape')</code></li>
          <li>Bot√≥n de cerrar (‚úï)</li>
          <li>Animaci√≥n de entrada</li>
        </ul>
      </div>

      <div class="resumen-card">
        <h4>üìë Tabs</h4>
        <ul>
          <li>Variable <code>activeTab</code></li>
          <li>M√©todo <code>selectTab(id)</code></li>
          <li>Navegaci√≥n por teclado (Arrow L/R, Home, End)</li>
          <li>Accesibilidad: <code>role="tablist"</code>, <code>aria-selected</code></li>
          <li>Transiciones suaves con animaciones</li>
        </ul>
      </div>

      <div class="resumen-card">
        <h4>üí¨ Tooltips</h4>
        <ul>
          <li>Eventos: <code>(mouseenter)</code>, <code>(mouseleave)</code></li>
          <li>Soporte de focus: <code>(focusin)</code>, <code>(focusout)</code></li>
          <li>Delay configurable (300ms)</li>
          <li>Posicionamiento din√°mico (top, right, bottom, left)</li>
          <li>Accesibilidad: <code>aria-describedby</code>, <code>role="tooltip"</code></li>
        </ul>
      </div>

      <div class="resumen-card">
        <h4>üìÇ Accordion</h4>
        <ul>
          <li>Expandir/colapsar con <code>expanded</code> boolean</li>
          <li>Navegaci√≥n por teclado (Arrow U/D, Home, End, Enter, Space)</li>
          <li>Animaci√≥n smooth con Angular animations</li>
          <li>Iconos indicadores rotados</li>
          <li>Accesibilidad: <code>aria-expanded</code>, <code>aria-controls</code></li>
          <li>Controles: expandir/colapsar todos</li>
        </ul>
      </div>
    </div>
  </section>
</div>
