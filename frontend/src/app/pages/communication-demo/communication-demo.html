<div class="communication-container">
  <header class="demo-header">
    <a routerLink="/" class="back-button">‚Üê Volver</a>
    <h1>üîÑ Servicio de Comunicaci√≥n entre Componentes</h1>
    <p class="subtitle">Patr√≥n Observable/Subject con RxJS BehaviorSubject</p>
  </header>

  <section class="explanation">
    <h2>¬øC√≥mo funciona?</h2>
    <div class="flow-diagram">
      <div class="flow-step">
        <strong>1. Emisor</strong> ‚Üí <code>service.sendNotification(msg)</code>
      </div>
      <div class="flow-arrow">‚Üì</div>
      <div class="flow-step">
        <strong>2. BehaviorSubject</strong> ‚Üí <code>next(msg)</code>
      </div>
      <div class="flow-arrow">‚Üì</div>
      <div class="flow-step">
        <strong>3. Observable</strong> ‚Üí <code>notifications$</code>
      </div>
      <div class="flow-arrow">‚Üì</div>
      <div class="flow-step">
        <strong>4. Receptor</strong> ‚Üí <code>subscribe(msg => ...)</code>
      </div>
    </div>
  </section>

  <div class="siblings-container">
    <app-sender />
    <app-receiver />
  </div>

  <section class="theory">
    <h2>üìö Teor√≠a</h2>
    
    <div class="theory-grid">
      <div class="theory-card">
        <h3>Subject</h3>
        <p><strong>Uso:</strong> Eventos √∫nicos (clicks, logs)</p>
        <p><strong>Ventaja:</strong> No retiene valor</p>
        <p><strong>Ejemplo:</strong> Notificaciones one-time</p>
      </div>

      <div class="theory-card highlight">
        <h3>BehaviorSubject</h3>
        <p><strong>Uso:</strong> Estado compartido (filtros, user)</p>
        <p><strong>Ventaja:</strong> Valor inicial + hist√≥rico</p>
        <p><strong>Ejemplo:</strong> Tema actual, usuario logueado</p>
      </div>

      <div class="theory-card">
        <h3>ReplaySubject</h3>
        <p><strong>Uso:</strong> Historial limitado de emisiones</p>
        <p><strong>Ventaja:</strong> Reproducir √∫ltimos N eventos</p>
        <p><strong>Ejemplo:</strong> Logs, notificaciones recientes</p>
      </div>
    </div>

    <div class="best-practices">
      <h3>‚úÖ Mejores Pr√°cticas</h3>
      <ul>
        <li>Usar <code>providedIn: 'root'</code> para servicios singleton</li>
        <li>Siempre limpiar suscripciones en <code>ngOnDestroy()</code></li>
        <li>Usar BehaviorSubject para estado que necesita valor inicial</li>
        <li>Exponer solo Observable p√∫blico, mantener Subject privado</li>
        <li>Considerar AsyncPipe en templates para auto-unsubscribe</li>
      </ul>
    </div>
  </section>
</div>
